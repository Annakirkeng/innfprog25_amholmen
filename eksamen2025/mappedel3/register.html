<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ansattregister</title>

    <link rel="stylesheet" href="style.css">
</head>
    <body>
        <header>
            <h1>HÃ¸gskolen JS</h1>
        </header>

        <main>
                <section id="filterButtons">
                    <button id="showAll">vis alle ansatte</button>
                    <button id="showTeachers">vis undervisere</button>
                    <button id="showAdmin">vis administrasjon</button>
                </section>
            </section>

            <section id="positionFilter">
                <p>vis kun stilling:</p>
                <section id="positionButtons"></section>
            </section>

            <h2>Ansatte</h2>

            <section id="employeeList"></section>

            <section id="courseOverview">
                <h2>Kursoversikt</h2>
                <ul id="courseList"></ul>
            </section>
        </main>

        <script type="module">
            import { employees, positions } from "../mappedel1/register.js"
            import {getTeachers,getAdministrativeStaff,filterEmployeesByPosition, createEmployeeHTML} from "../mappedel1/action.js"
            import {getAllCourses} from "../mappedel1/action.js"

            const employeeListSection = document.getElementById("employeeList")
            const showAllButton = document.getElementById("showAll")
            const showTeachersButton = document.getElementById("showTeachers")
            const showAdminButton = document.getElementById("showAdmin")
            const positionButtonsSection = document.getElementById("positionButtons")

            positions.forEach((positionName) => {
                const button = document.createElement ("button")
                button.textContent = positionName

                button.addEventListener("click", () => {
                    const filtered = filterEmployeesByPosition(positionName)
                    renderEmployees(filtered)
                })
                positionButtonsSection.appendChild(button)
            })


            function renderEmployees(employeeArray){
                const html = employeeArray.map((employee) => createEmployeeHTML(employee)).join("")
                employeeListSection.innerHTML = html
            }

            function renderCourse(){
                const courseList = document.getElementById("courseList")
                const courses = getAllCourses()

                courseList.innerHTML = courses.map((course) => `<li>${course}</li>`).join("")
            }

            showAllButton.addEventListener("click", ()=>{
                renderEmployees(employees)
            })
            showTeachersButton.addEventListener("click", ()=>{
                const teachers = getTeachers()
                renderEmployees(teachers)
            })

            showAdminButton.addEventListener("click", ()=>{
                const adminStaff = getAdministrativeStaff()
                renderEmployees(adminStaff)
            })

            renderEmployees(employees)
            renderCourse()
        </script>
    </body>
</html>